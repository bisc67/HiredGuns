.key Figure

Echo "*N                          - [1mFIGURENKONVERTIERUNG[22m -*N"

If "<Figure>" Eq ""
	Echo "     Dieses Icon markieren (einmal anklicken), dann Umschalttaste*N     gedrückt halten und auf die Spielfigur doppelklicken, die*N     konvertiert werden soll.*N"
	Ask "               [32mZum Fortfahren RETURN drücken.[31m"
        EndCli
EndIf

List >Ram:CopyFile1 "<Figure>" lformat "Copy Ram:MakeFigure/Figure.crn /CharactersGfx/%N.gfx"
List >Ram:CopyFile2 "<Figure>" lformat "Copy Ram:MakeFigure/Figure.crn *"Hired Guns Disk 1:CharactersGfx/%N.gfx*""
List >Ram:CopyFile3 "<Figure>" lformat "Copy Ram:MakeFigure/Figure.crn //Disk1/CharactersGfx/%N.gfx"

If Not Exists Ram:MakeFigure
	Echo "               [3mBefehle werden kopiert auf to RAM:....[23m*N"
	Copy /MakeFigure Ram:MakeFigure quiet
	Copy /C/Crunch Ram:MakeFigure/Crunch quiet
EndIf
Path Ram:MakeFigure Add

Echo "     Mit diesem Skript wird eine Figurengrafik umgewandelt, so daá sie"
Echo "     in `Hired Guns' verwendet werden kann."
Echo "     Diskettenbenutzer: Das Skript versucht, auf Diskette 1 zu schreiben,"
Echo "     verwenden Sie daher nur eine Sicherungskopie. Sehen Sie im Handbuch"
Echo "     nach, wie eine Sicherungskopie der Hired-Guns-Disketten angefertigt"
Echo "     wird.*N"

Ask "               [32mSoll die Konvertierung gestartet werden? ([31mY[32m/[31mN[32m)[31m"

If Warn
	Echo "*N               [3mGrafik der neuen Figur wird kopiert auf RAM:....[23m"
	Copy "<Figure>" Ram:MakeFigure/Figure.ilbm quiet

	Echo "               [3mGrafik der linken Seite wird extrahiert...[23m"
	MakeFigure >nil: -@Ram:MakeFigure/Filters -#Left Ram:MakeFigure/Figure.ilbm Ram:MakeFigure/Left.bin
	Join Ram:MakeFigure/Figure.dump Ram:MakeFigure/Left.bin as Ram:MakeFigure/Left.bob

	Echo "               [3mGrafik der rechten Seite wird extrahiert...[23m"
	MakeFigure >nil: -@Ram:MakeFigure/Filters -#Right Ram:MakeFigure/Figure.ilbm Ram:MakeFigure/Right.bin
	Join Ram:MakeFigure/Figure.dump Ram:MakeFigure/Right.bin as Ram:MakeFigure/Right.bob

	Echo "               [3mGrafik der Vorderseite wird extrahiert...[23m"
	MakeFigure >nil: -@Ram:MakeFigure/Filters -#Front Ram:MakeFigure/Figure.ilbm Ram:MakeFigure/Front.bin
	Join Ram:MakeFigure/Figure.dump Ram:MakeFigure/Front.bin as Ram:MakeFigure/Front.bob

	Echo "               [3mGrafik der Rückseite wird extrahiert...[23m"
	MakeFigure >nil: -@Ram:MakeFigure/Filters -#Back Ram:MakeFigure/Figure.ilbm Ram:MakeFigure/Back.bin
	Join Ram:MakeFigure/Figure.dump Ram:MakeFigure/Back.bin as Ram:MakeFigure/Back.bob

	Echo "               [3mGrafik des Gesichts wird extrahiert...[23m"
	MakeFigure >nil: -@Ram:MakeFigure/Filters -#Face Ram:MakeFigure/Figure.ilbm Ram:MakeFigure/Face.bin
	Join Ram:MakeFigure/Face.dump Ram:MakeFigure/Face.bin as Ram:MakeFigure/Face.bob

	Echo "               [3mDatei wird komprimiert (kann etwas dauern)...[23m"

	Join Ram:MakeFigure/Front.bob Ram:MakeFigure/Left.bob Ram:MakeFigure/Right.bob Ram:MakeFigure/Back.bob Ram:MakeFigure/Face.bob as Ram:MakeFigure/Figure.bob
	Crunch >nil: Ram:MakeFigure/Figure.bob ram:Makefigure/Figure.crn

	Echo "               [3mDatei wird geschrieben...[23m"

	If Exists //Disk1/CharactersGfx
		Execute Ram:CopyFile3
	Else
		If Exists /CharactersGfx
			Execute Ram:CopyFile1
		Else
			Execute Ram:CopyFile2
		EndIf
	EndIf

	Echo "*N               Konvertierung beendet!"
Else
	Echo "*N               Konvertierung abgebrochen!"
EndIf
