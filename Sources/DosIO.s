*------------------------------------------------------------------------------
* AmigaDOS File/Disk Functions for AmigaDos disks
*
* Copyright (c) 1988-92 Rob Northen Computing, U.K. All Rights Reserved.
*
* File: DOSio.s
*
* Date: 07.09.92
*------------------------------------------------------------------------------

*------------------------------------------------------------------------------
* AmigaDOS File/Disk Functions
* on entry,
*	d0.l = function
*		0=load file
*		1=save file
*		2=delete file
*		3=read file/directory names from directory
*		4=format disk
*			to format DF0: a0.l = ptr to "DF0:Volume_Name",0
*			to format DF1: a0.l = ptr to "DF1:Volume_Name",0
*			Note: volume name must be <=30 characters
*	d1.l = length of file in bytes (for save function only)
*	a0.l = full pathname of file, terminated with 0
*	a1.l = file buffer (even word boundary)
*		if d0.l=3 a1.l = ptr to file name buffer
*	a2.l = workspace buffer ($4d00 bytes of CHIPmem required)
* on exit,
*	d0.l = result
*		  0 = no error
*		204 = directory not found
*		205 = file not found
*		221 = disk full
*		225 = not a DOS disk
*		405 = bad block checksum
*		see diskio.s for error codes
*	d1.l = length of file in bytes, for load and save file functions
*		OR no. of file entries for directory function)
*	all others registers are preserved
*
* For the Directory function the output buffer is filled as follows:
*
* offset  field length  field description
*
* $00     1             entry type  (2=dir entry, -3=file entry)
* $01     1             entry name length
* $02     30            entry name
* $20     1             entry type
* $21     1             entry name length
* $22     30            entry name
* etc.
*
* Note: the output buffer must be large enough to hold all file names in the
* directory.
*
* IMPORTANT :
*
* File loading time can be greatly reduced by writing the file onto the
* disk using the source file DOSIO.S. This has the advantage over using
* AmigaDos to copy the file onto the disk by writing out the file's data
* block lists, as well as the actual data blocks, on contiguous sectors.
*------------------------------------------------------------------------------
dosio
		dc.l $48E7FFFE,$2C002E01,$28482A49,$2C4A6100,$052C4A86,$6608614E,$2F410004,$6032BC3C
		dc.l $00016606,$610000E2,$6026BC3C,$00026606,$61000270,$601ABC3C,$0003660A,$61000360
		dc.l $2F410004,$600ABC3C,$00046604,$610003B6,$2E807200,$7400363C,$80006100,$06144CDF
		dc.l $7FFF4A80,$4E756100,$04306670,$2E280144,$2F0745E8,$01386166,$665E2401,$2801264D
		dc.l $2C07E08E,$E28E6602,$264E6152,$664A5282,$2A016708,$B4816604,$538666EE,$22049484
		dc.l $204B6100,$05CA6630,$6100055A,$662A2028,$000C9E80,$41E80018,$E4986002,$2AD851C8
		dc.l $FFFC4240,$E5986002,$1AD851C8,$FFFC5382,$66D62205,$200766A2,$221F4A80,$4E752F02
		dc.l $204E2028,$00086610,$222801F8,$67146100,$0510660E,$45E80138,$22227001,$91A80008
		dc.l $7000241F,$4A804E75,$61000198,$6712B0BC,$000000CD,$6600016C,$61000254,$66000164
		dc.l $610002D0,$70022080,$21470144,$61000258,$317A04F6,$01F670FD,$214001FC,$70012D40
		dc.l $34FC7C02,$610001B6,$67000132,$41FA04E2,$30802D40,$35042207,$610001A2,$6700011E
		dc.l $52860481,$00008940,$62EE2A06,$2C2E3504,$6100018A,$610001D4,$2D463504,$42AE3508
		dc.l $42AE36F8,$45EE3638,$43EE3700,$2C056100,$01806700,$00E82A06,$7600780B,$B2846C02
		dc.l $28012506,$20066100,$01A25286,$26497008,$22C022EE,$350422EE,$34FC203C,$000001E8
		dc.l $BE806C02,$20079E80,$22C022C6,$42994A40,$67025340,$12DD51C8,$FFFC204B,$61000432
		dc.l $21400014,$52837001,$D1AE34FC,$D1AE3508,$4A87671A,$7048B0AE,$35086706,$B88366A2
		dc.l $60262C2E,$35046100,$00F42D46,$36F841EE,$35002028,$01342140,$00102228,$00046100
		dc.l $0434665E,$70102080,$20076706,$2C056100,$00CC204B,$21400010,$42A80014,$610003D2
		dc.l $21400014,$22052403,$41EE3700,$61000412,$66304A87,$670E7048,$B0AE3508,$6700FF0E
		dc.l $6000FF26,$611E661A,$41EE3300,$323A03BC,$42906100,$039C2080,$600003E4,$203C0000
		dc.l $00DD4E75,$323A03A6,$41EE3500,$61000372,$6668303A,$039C363A,$03962180,$30006000
		dc.l $03B46100,$01F46652,$28016100,$00C2664A,$20046124,$43EE0138,$222E0008,$53812021
		dc.l $611651C9,$FFFA222E,$01F86798,$204E6100,$03306626,$200160DA,$48E7C000,$554080FC
		dc.l $0020E548,$06403304,$22360000,$484001C1,$48402D81,$00004CDF,$00034E75,$20065340
		dc.l $5240B07C,$06E06706,$612267F4,$2C004E75,$720061E8,$67102006,$52415240,$B07C06E0
		dc.l $67046108,$66F22006,$4A814E75,$48E7C000,$554080FC,$0020E548,$06403304,$22360000
		dc.l $48400101,$4CDF0003,$4E7548E7,$C0005540,$80FC0020,$E5480640,$33042236,$00004840
		dc.l $01814840,$2D810000,$4CDF0003,$4E75323A,$02BA41EE,$33006100,$02F46608,$61000292
		dc.l $66000286,$4E7543E8,$01B170FF,$5200B03C,$001E6704,$12DC66F4,$114001B0,$4E756100
		dc.l $00F8664C,$78007A00,$22364018,$673641EE,$33006100,$024C6638,$7002B090,$662670FD
		dc.l $B0A801FC,$67087002,$B0A801FC,$66161AC0,$43E801B0,$701E1AD9,$51C8FFFC,$52852228
		dc.l $01F066CA,$5844B87C,$012066BC,$22057000,$4E7541EE,$35002248,$303C05FF,$429951C8
		dc.l $FFFC4E75,$7200343C,$06E07602,$61000262,$66000084,$61DC7002,$20807048,$2140000C
		dc.l $70FF2140,$0138217C,$00000371,$013C6100,$FF567001,$214001FC,$DCFC0400,$70026100
		dc.l $FE985240,$B07C06E0,$66F4203C,$00000370,$6100FEF8,$52806100,$FEF29CFC,$04006100
		dc.l $01B02140,$0014D0FC,$02006100,$01A42080,$90FC0200,$323C0370,$74026100,$01E46616
		dc.l $2248303C,$007F22FC,$444F5300,$51C8FFF8,$72006100,$01CA4E75,$2F0C204E,$6100013A
		dc.l $66000094,$43FA0182,$32812E8C,$610000D6,$67000084,$E54843FA,$017432C1,$32C02230
		dc.l $0000674A,$6100013A,$666C203C,$000000E1,$7402B490,$66607402,$BC3C0003,$67064A14
		dc.l $660274FD,$B4A801FC,$661E43E8,$01B045FA,$01447400,$14195302,$10196174,$B01A56CA
		dc.l $FFF86604,$4A12671E,$303C01F0,$60A8203C,$000000CC,$BC3C0003,$671C4A14,$6618203C
		dc.l $000000CD,$60104A14,$6600FF7A,$43FA0102,$32A801F2,$7000285F,$4A804E75,$204C612E
		dc.l $B03C0044,$66266126,$B03C0046,$661E1018,$04000030,$6D16B03C,$00336E10,$0C18003A
		dc.l $660A41FA,$00CE1140,$0001584C,$4E751018,$B03C0061,$6D0AB03C,$007A6E04,$020000DF
		dc.l $4A004E75,$48E740C0,$700072FF,$204C43FA,$00A44211,$52814A14,$67080C1C,$002F66F4
		dc.l $534C4A81,$672AC2FC,$000D1018,$61C212C0,$D2400281,$000007FF,$B9C866EA,$0C14002F
		dc.l $6602524C,$421982FC,$00484241,$48415C41,$20014CDF,$03024E75,$323C0370,$6122661E
		dc.l $203C0000,$00E17402,$B4906612,$7401B4A8,$01FC660A,$43FA0034,$32A8013E,$70004E75
		dc.l $616A660A,$610A6706,$203C0000,$01954E75,$48E74080,$7000323C,$007FD098,$51C9FFFC
		dc.l $44804CDF,$01024E75,$00000000,$00000000,$00000000,$00000000,$00000000,$00000000
		dc.l $00000000,$00000000,$00000000,$00000000,$00000000,$42A80014,$61B62140,$00147401
		dc.l $2F037601,$610A261F,$4A804E75,$74017600,$224E303A
		dc.w $FFBE

		include	diskio.s
